<!DOCTYPE html>

<html>
    <head>
        <title>Project_1_Login</title>
        <meta charset="UTF-8"/>
        <link rel="stylesheet" href=" Styles/LogInStyle.css">
    </head> 
    <body style="background-image:url('../Images/paper.jpg');">
    <header>
            <h2 >Employee Reimbursement Login</h2>
      </header>
        <div id = center class="center">
        <form id="login_form" method="POST" onsubmit="return setLogin()" action="http://localhost:8080/logIn">
                
                    
                    <input type="text" placeholder="Username" required maxlength="20" name="userName" id="userName"/>
                    <br><br>
					<input type="password" placeholder="Password"  required name="password" id = "password" />
                        <br><br>

                        <button id="button" type="submit" name="Sign-in">Sign-In</button>
         				<footer>
          				<h6>Copyright No One. No Rights Reserved.</h6>
      					</footer>
                        
        </form>
      </div>    
    </body>
    <script>
    function setLogin() {
    	
    	let url = 'http://localhost:8080/user/';
        
        url = url + document.getElementById("userName").value;
        console.log(url);

        
        let xhr = new XMLHttpRequest(); //readyState is 0
        
        xhr.onreadystatechange = function(){
            
            if(xhr.readyState === 4 && xhr.status === 200){
           
                let result = JSON.parse(xhr.response);
                
    			localStorage.setItem("userName", result.name);
            	}
    		}
         
            xhr.open('GET', url); //readyState is 1

            
            xhr.send(); //readyState is 2
    	}
    
    </script>
</html>
